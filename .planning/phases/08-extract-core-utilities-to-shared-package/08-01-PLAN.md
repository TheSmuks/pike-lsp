---
phase: 08-extract-core-utilities-to-shared-package
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [
  packages/core/package.json,
  packages/core/tsconfig.json,
  packages/core/src/errors.ts,
  packages/core/src/logging.ts,
  packages/core/src/index.ts
]
autonomous: true

must_haves:
  truths:
    - "packages/core directory exists with standard structure"
    - "@pike-lsp/core builds successfully to dist/"
    - "Errors and Logger are exportable from the new package"
  artifacts:
    - path: "packages/core/package.json"
      provides: "Package identity and build scripts"
    - path: "packages/core/src/index.ts"
      provides: "Public API for shared utilities"
  key_links:
    - from: "packages/core/src/index.ts"
      to: "packages/core/src/logging.ts"
      via: "export *"
---

<objective>
Create the @pike-lsp/core package and migrate the foundational Logger and Error classes to it.

Purpose: Eliminate code duplication and provide a single source of truth for core utilities.
Output: A buildable shared package ready for consumption by other workspace packages.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/STATE.md
@.planning/ROADMAP.md
@.planning/phases/08-extract-core-utilities-to-shared-package/08-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Initialize @pike-lsp/core package structure</name>
  <files>packages/core/package.json, packages/core/tsconfig.json</files>
  <action>
    Create packages/core directory.
    Create package.json with:
    - name: "@pike-lsp/core"
    - type: "module"
    - main: "./dist/index.js"
    - types: "./dist/index.d.ts"
    - build script: "tsc"

    Create tsconfig.json extending project standards (use pike-bridge/tsconfig.json as template).
  </action>
  <verify>ls packages/core/package.json</verify>
  <done>Package structure initialized with valid JSON files.</done>
</task>

<task type="auto">
  <name>Task 2: Migrate source files and create barrel export</name>
  <files>packages/core/src/errors.ts, packages/core/src/logging.ts, packages/core/src/index.ts</files>
  <action>
    Copy errors.ts and logging.ts from packages/pike-bridge/src/ (they are identical to server's versions but cleaner to start from).
    Remove the "TODO: Extract to shared package" comments.
    Create src/index.ts exporting everything from errors.js and logging.js (use .js extensions for ESM).
  </action>
  <verify>grep "export class Logger" packages/core/src/logging.ts</verify>
  <done>Foundation files moved and indexed.</done>
</task>

<task type="auto">
  <name>Task 3: Verify package build</name>
  <files>packages/core/dist/index.js</files>
  <action>
    Run pnpm build in packages/core.
    Ensure tsc generates dist/ with correct types and JS files.
  </action>
  <verify>cd packages/core && pnpm run build</verify>
  <done>Package builds successfully and is ready for workspace consumption.</done>
</task>

</tasks>

<verification>
Check packages/core/dist/ exists and contains built artifacts.
Verify index.js exports expected symbols using node.
</verification>

<success_criteria>
@pike-lsp/core is a valid, buildable package in the workspace.
</success_criteria>

<output>
After completion, create `.planning/phases/08-extract-core-utilities-to-shared-package/08-01-SUMMARY.md`
</output>
